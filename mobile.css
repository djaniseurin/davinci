/* =========================================================
   MOBILE ONLY (<= 900px)
   Functional responsive layer for all pages.
========================================================= */
@media (max-width: 900px) {
  :root {
    --m-gutter: 18px;
    --m-gap: 18px;
  }

  html,
  body {
    margin: 0;
    padding: 0;
    overflow-x: hidden;
  }

  /* Header */
  header {
    height: 60px;
    padding: 0 var(--m-gutter);
    display: flex;
    align-items: center;
    justify-content: center;
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    z-index: 1000;
  }
  .header-left,
  .header-right {
    position: absolute;
    top: 50%;
    transform: translateY(-50%);
  }
  .header-left { left: var(--m-gutter); }
  .header-right {
    left: var(--m-gutter);
    right: var(--m-gutter);
    display: flex;
    gap: 10px;
    align-items: center;
    justify-content: flex-end;
    flex-wrap: nowrap;
    pointer-events: none;
  }
  .header-right > * { pointer-events: auto; }
  .header-center { position: static; }
  .logo { height: 22px !important; width: auto !important; }
  .icon { height: 20px !important; width: auto !important; }
  .header-right .lang-wrapper,
  .header-right .lang-btn {
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    line-height: 1 !important;
  }
  .header-right .lang-btn img.icon {
    display: block !important;
    height: 20px !important;
    width: auto !important;
  }
  /* Mobile header icon order: Globe, Collections, Boutiques, Account */
  .header-right .lang-wrapper { order: 1 !important; }
  .header-right a[href="collections.html"] { order: 2 !important; }
  .header-right a[href="boutique.html"] { order: 3 !important; }
  .header-right a[href="login.html"] { order: 4 !important; }
  /* Place globe next to logo on mobile */
  .header-right .lang-wrapper {
    margin-right: auto !important;
    margin-left: 32px !important;
  }

  /* Full-bleed media helper */
  .hero video,
  .hero-image img,
  .image-content img,
  .story-image img,
  .split-image img,
  .map-wrapper,
  #shop-map {
    width: 100vw !important;
    max-width: 100vw !important;
    margin-left: calc(50% - 50vw) !important;
    margin-right: calc(50% - 50vw) !important;
    border-radius: 0 !important;
  }

  /* Hero */
  .hero,
  .hero-image {
    margin-top: 60px;
    height: calc(88vh - 60px);
    min-height: calc(88vh - 60px);
    margin-bottom: 0 !important;
  }

  .hero + section,
  .hero-image + section {
    margin-top: 0 !important;
    padding-top: 0 !important;
  }
  .hero-text,
  .hero-overlay {
    position: absolute;
    left: var(--m-gutter);
    right: var(--m-gutter);
    bottom: 22px !important;
    top: auto !important;
    max-width: none;
  }
  /* Histoire: move hero text higher on mobile */
  .page-histoire .hero-text {
    top: 60px !important;
    bottom: auto !important;
  }
  /* Histoire: first section starts under header */
  .page-histoire .story-section:first-of-type {
    margin-top: 40px !important;
  }
  .hero-text.bottom-left,
  .hero-text.bottom-right,
  .hero-text.top-left,
  .hero-text.top-right,
  .hero-text.center,
  .hero-overlay {
    bottom: 22px !important;
    top: auto !important;
  }
  .hero-text h2,
  .hero-overlay h2 {
    font-size: clamp(26px, 6vw, 36px);
    line-height: 1.1;
  }
  .hero-text p,
  .hero-overlay p {
    font-size: 14px;
  }

  /* Stack sections */
  .story-section,
  .text-button-image,
  .split-section,
  .full-screen,
  .text-images.full-screen,
  .center-text-gallery {
    display: flex !important;
    flex-direction: column !important;
    align-items: stretch !important;
    min-height: auto !important;
    height: auto !important;
    padding: 0 !important;
    gap: var(--m-gap) !important;
  }
  .center-text-gallery .center-text { order: 1 !important; }
  .center-text-gallery .gallery-row { order: 2 !important; }
  .center-text-gallery .gallery-dots { order: 3 !important; }
  .story-image,
  .image-content,
  .split-image {
    width: 100% !important;
    order: 1 !important;
  }
  .story-text,
  .text-content,
  .split-text,
  .text-left,
  .center-text {
    order: 2 !important;
    max-width: none !important;
    padding: 0 var(--m-gutter) 28px !important;
    text-align: left !important;
  }
  .page-histoire .story-text { order: 1 !important; }
  .page-histoire .story-image { order: 2 !important; }
  .story-text h2,
  .text-content h2,
  .split-text h2,
  .text-left h2,
  .center-text h2 {
    font-size: clamp(24px, 5.5vw, 34px);
  }
  .story-text p,
  .text-content p,
  .split-text p,
  .text-left p,
  .center-text p,
  .image-caption {
    font-size: 14px;
    line-height: 1.6;
  }

  /* Buttons */
  .appointment-button,
  .hero-text .btn,
  .hero-image .btn,
  .split-text .btn,
  .story-section .btn,
  button {
    width: calc(100% - (var(--m-gutter) * 2)) !important;
    margin: 12px var(--m-gutter) 0 !important;
    text-align: center !important;
  }

  /* Carousels (Home: watches + services, Histoire, Collections) */
  .text-images.full-screen .images-right,
  .services-carousel .images-right,
  .collections-grid,
  .gallery-row {
    display: flex !important;
    flex-direction: row !important;
    overflow-x: auto !important;
    scroll-snap-type: x mandatory !important;
    gap: 12px !important;
    padding: 0 var(--m-gutter) 16px !important;
    -webkit-overflow-scrolling: touch !important;
    scrollbar-width: none !important;
    width: 100vw !important;
    margin-left: calc(50% - 50vw) !important;
    margin-right: calc(50% - 50vw) !important;
    scroll-padding-left: var(--m-gutter) !important;
    align-items: flex-start !important;
    justify-content: flex-start !important;
    flex-wrap: nowrap !important;
    position: relative !important;
  }
  .text-images.full-screen .images-right::after,
  .services-carousel .images-right::after,
  .collections-grid::after,
  .gallery-row::after {
    content: "\2192";
    position: sticky;
    right: var(--m-gutter);
    bottom: 12px;
    align-self: flex-end;
    margin-left: auto;
    font-size: 14px;
    letter-spacing: 0;
    opacity: 0.95;
    padding: 6px 10px;
    border-radius: 999px;
    background: rgba(0, 0, 0, 0.6);
    backdrop-filter: blur(6px);
    pointer-events: none;
  }
  .text-images.full-screen .images-right::-webkit-scrollbar,
  .services-carousel .images-right::-webkit-scrollbar,
  .collections-grid::-webkit-scrollbar,
  .gallery-row::-webkit-scrollbar {
    display: none !important;
  }
  .text-images.full-screen .images-right .image-wrapper,
  .services-carousel .images-right .image-wrapper,
  .collections-grid .watch-card,
  .gallery-row img {
    flex: 0 0 auto !important;
    width: 76vw !important;
    max-width: 320px !important;
    scroll-snap-align: start !important;
  }

  /* Prevent cut images inside carousel cards */
  .text-images.full-screen .image-button img,
  .services-carousel .image-button img,
  .collections-grid .watch-card img,
  .gallery-row img {
    width: 100% !important;
    max-width: 100% !important;
    height: auto !important;
    object-fit: contain !important;
    margin: 0 !important;
    display: block !important;
  }

  /* Boutique map */
  .boutiques-layout {
    flex-direction: column !important;
    gap: 18px !important;
    padding: 0 !important;
  }
  .boutique-info {
    padding: 0 var(--m-gutter) !important;
  }
  .boutique-info h1 {
    font-size: clamp(26px, 6vw, 34px) !important;
  }
  .boutique-info p,
  .boutique-info .label {
    font-size: 14px !important;
  }
  .map-wrapper {
    height: 320px !important;
  }

  /* Legal pages */
  .legal-container {
    padding: 26px 18px !important;
    margin: 90px 12px 40px !important;
  }
  .legal-container h1 { font-size: 24px !important; }
  .legal-container h2 { font-size: 18px !important; }

  /* RDV */
  .page-title {
    font-size: clamp(28px, 6vw, 38px) !important;
    margin-top: 120px !important;
  }
  .page-title + p {
    font-size: 14px !important;
    padding: 0 var(--m-gutter) !important;
  }
  .appointment-section { padding: 0 var(--m-gutter) !important; }

  /* Auth */
  .login-container,
  .register-container {
    width: 100% !important;
    max-width: 100% !important;
    border-radius: 0 !important;
    min-height: 100vh !important;
    display: flex !important;
    flex-direction: column !important;
    justify-content: center !important;
    padding: 32px var(--m-gutter) !important;
  }

  /* Footer */
  .site-footer {
    padding: 30px var(--m-gutter) !important;
  }
  .footer-categories {
    gap: 14px !important;
    font-size: 13px !important;
  }
  .footer-lang-slot {
    margin-top: 4px !important;
    position: relative;
  }
  .footer-lang-slot .lang-wrapper,
  .footer-lang-slot .lang-btn {
    display: flex !important;
    align-items: center !important;
    gap: 10px !important;
    pointer-events: auto !important;
  }
  .footer-lang-slot .lang-btn img {
    content: url("assets/footer/world_white.png") !important;
  }
  .footer-lang-slot .lang-label {
    display: inline !important;
    font-size: 13px !important;
    letter-spacing: 1px !important;
    text-transform: uppercase !important;
    color: #fff !important;
  }
  .footer-lang-slot .lang-menu {
    top: auto !important;
    bottom: 36px !important;
    left: 0 !important;
    right: auto !important;
  }

  .footer-copy,
  .footer-right {
    position: static !important;
    text-align: left !important;
    margin-top: 12px !important;
  }
}
